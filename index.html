<!DOCTYPE html>
<html>
<head>
  <title>Chase Game</title>
  <style>
    canvas {
      border: 1px solid black;
      display: block;
      margin: 0 auto;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="800" height="600"></canvas>
  <div id="gameOver" style="display: none;">
    <h1>Game Over</h1>
    <p id="finalScore"></p>
    <button onclick="restartGame()">Restart</button>
  </div>

  <script>
    // Game constants
    const canvas = document.getElementById('gameCanvas');
    const context = canvas.getContext('2d');
    const width = canvas.width;
    const height = canvas.height;

    // Player object
    const player = {
      x: width / 2,
      y: height / 2,
      width: 20,
      height: 20,
      color: '#000000',
      speed: 3,
      score: 0
    };

    // Chasing block object
    const chasingBlock = {
      x: 50,
      y: 50,
      width: 30,
      height: 30,
      color: '#FF0000',
      speed: 2
    };

    // Keyboard input
    const keys = {};

    // Game state
    let gameRunning = true;

    // Update game objects
    function update() {
      if (!gameRunning) return;

      // Update player
      if (keys['ArrowLeft']) {
        player.x -= player.speed;
      } else if (keys['ArrowRight']) {
        player.x += player.speed;
      }

      if (keys['ArrowUp']) {
        player.y -= player.speed;
      } else if (keys['ArrowDown']) {
        player.y += player.speed;
      }

      // Update chasing block
      chasePlayer();

      // Check collision between player and chasing block
      if (checkCollision(player, chasingBlock)) {
        gameRunning = false;
        document.getElementById('finalScore').textContent = 'Final Score: ' + player.score;
        document.getElementById('gameOver').style.display = 'block';
      }

      // Check if chasing block catches the player
      if (player.x + player.width >= chasingBlock.x &&
          player.x <= chasingBlock.x + chasingBlock.width &&
          player.y + player.height >= chasingBlock.y &&
          player.y <= chasingBlock.y + chasingBlock.height) {
        restartGame();
        return;
      }

      // Update score
      player.score += 1;

      // Draw game objects
      context.clearRect(0, 0, width, height);

      // Draw player
      context.fillStyle = player.color;
      context.fillRect(player.x, player.y, player.width, player.height);

      // Draw chasing block
      context.fillStyle = chasingBlock.color;
      context.fillRect(chasingBlock.x, chasingBlock.y, chasingBlock.width, chasingBlock.height);

      // Draw score
      context.fillStyle = '#000';
      context.font = '20px Arial';
      context.fillText('Score: ' + player.score, 10, 30);

      requestAnimationFrame(update);
    }

    // Check collision between two rectangles
    function checkCollision(rect1, rect2) {
      return rect1.x < rect2.x + rect2.width &&
             rect1.x + rect1.width > rect2.x &&
             rect1.y < rect2.y + rect2.height &&
             rect1.y + rect1.height > rect2.y;
    }

    // Chase the player
    function chasePlayer() {
      const dx = player.x - chasingBlock.x;
      const dy = player.y - chasingBlock.y;
      const distance = Math.sqrt(dx * dx + dy * dy);
      const velocityX = (dx / distance) * chasingBlock.speed;
      const velocityY = (dy / distance) * chasingBlock.speed;
      chasingBlock.x += velocityX;
      chasingBlock.y += velocityY;
    }

    // Handle keydown events
    function handleKeyDown(event) {
      keys[event.key] = true;
    }

    // Handle keyup events
    function handleKeyUp(event) {
      keys[event.key] = false;
    }

    // Restart the game
    function restartGame() {
      player.x = width / 2;
      player.y = height / 2;
      player.score = 0;
      gameRunning = true;
      document.getElementById('gameOver').style.display = 'none';
      update();
    }

    // Event listeners
    document.addEventListener('keydown', handleKeyDown);
    document.addEventListener('keyup', handleKeyUp);

    // Start the game
    update();
  </script>
</body>
</html>
